<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Задача 7</title>
  </head>
  <body>
    <h1>Задача 7</h1>
    <p>
      Відобразити падаючий сніг. Сніжинка з’являється у верхній частині екрану
      (top =0) і з випадковою швидкістю рухається вниз (у setInterval викликати
      метод, у якому додавати крок до top). Як тільки сніжинка досягає нижньої
      частини екрану (top>maxTop) вона знову повинна з’явитись у верхній частині
      екрану (top=0).
    </p>
    <script>
      "use strict";
      const leftPos = window.innerWidth / 2;
      console.log(leftPos);
      class LetItSnow {
        constructor(left, top, imgSrc, width, hieght, step) {
          this.left = left;
          this.top = top;
          this.imgSrc = imgSrc;
          this.width = width;
          this.hieght = hieght;
          this.step = step;
        }
        createSnow() {
          const elCtn = document.createElement("div");
          const img = document.createElement("img");
          img.setAttribute("src", this.imgSrc);
          img.style.width = `${this.width}`;
          img.style.height = `${this.height}`;
          img.style.position = "absolute";
          img.style.top = `${this.top}px`;
          img.style.left = `${this.left}px`;
          elCtn.append(img);
          document.body.append(elCtn);
          return elCtn;
        }
        getRandomSpeed(max, min) {
          return Math.floor(Math.random() * (max - min + 1) + min);
        }
        createAnimation() {
          let img = document.querySelector("img");
          let newTop = this.top + this.step;
          console.log(newTop);
          if (newTop > window.innerHeight) {
            this.top = 0;
            img.style.top = 0;
          } else {
            img.style.top = `${this.top}px`;
            this.top = newTop;
          }
          console.log(this.top);
        }
        startAnimation() {
          const speed = this.getRandomSpeed(500, 100);
          setInterval(this.createAnimation.bind(this), speed);
        }
      }
      let snow = new LetItSnow(
        `${window.innerWidth / 2}`,
        0,
        "../img/snow.png",
        "50px",
        "50px",
        30
      );
      snow.createSnow();
      snow.startAnimation();
    </script>
  </body>
</html>
